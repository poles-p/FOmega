%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                                                            %%
%%                                              Wrocław, styczeń 2011 r.      %%
%%                                                                            %%
%%                                                                            %%
%%                                                                            %%
%%                                SYSTEMY TYPÓW - PROJEKT                     %%
%%                                                                            %%
%%                                   Piotr Polesiuk                           %%
%%                                Małgorzata Jurkiewicz                       %%
%%                                                                            %%
%%                                                                            %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\documentclass[11pt,leqno]{article}

\usepackage[polish]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}


\usepackage{a4wide}

\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage[pdftex]{graphicx}
\usepackage{caption}
\usepackage{bm}
\usepackage{amsthm}
\usepackage{indentfirst}

 
%%%%%%%%%%%%%%%%%%
% Kropka po numerze paragrafu, podparagrafu itp. 

\makeatletter
 \renewcommand\@seccntformat[1]{\csname the#1\endcsname.\quad}
 \renewcommand\numberline[1]{#1.\hskip0.7em}
\makeatother

%%%%%%%%%%%%%%%%%%
% Kropka po numerze tablicy, rysunku i ustawienie czcionki dla etykiety. 

\captionsetup{labelfont=sc,labelsep=period}

%%%%%%%%%%%%%%%%%%
% Inna numeracja wzorów.

\renewcommand{\theequation}{\arabic{section}.\arabic{equation}}

%%%%%%%%%%%%%%%%%%

\title{{\textbf{System typów $F_{\omega}$}}\\[1ex]
       {\Large Systemy Typów 2010/11}\\[-1ex]
       {\large Prowadzący: dr Dariusz Biernacki}}
\author{Piotr Polesiuk \\ \texttt{bassists@o2.pl} 
   \and Małgorzata Jurkiewicz \\ \texttt{gosia.jurkiewicz@gmail.com}} 

\date{Wrocław, dnia \today\ r.}

\begin{document}
\thispagestyle{empty}
\maketitle

\pagebreak

\theoremstyle{plain}
\newtheorem{twierdzenie}{Twierdzenie}
\newtheorem{lemat}{Lemat}

\theoremstyle{definition}
\newtheorem{definicja}{Definicja}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Wstęp}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setcounter{equation}{0}


No to na razie taki bałagan



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{(Krótki opis) $F_{\omega}$}                                 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setcounter{equation}{0}


System $F_{\omega}$ to rachunek będący rozszerzeniem $\lambda_{\omega}$ oraz systemu $F$.
Wszystkie trzy wywodzą się z rachunku lambda z typami prostymi. Termy($t$) oraz typy($T$) definiujemy w $\lambda_{\rightarrow}$ następująco: \\ \\
\begin{tabular}{| l c r |}
  \hline
  t ::= &  &  \\
   & $x$ & \textit{zmienne}  \\
   & $\lambda x:T.t$ & \textit{abstrakcja} \\
   & t\;t & \textit{aplikacja} \\
   & & \\
  T ::= &  &  \\
   & $X$ & \textit{zmienna typowa} \\
   & $T \rightarrow T$ & \textit{typ funkcji} \\
  \hline
\end{tabular} \\

System F jest systemem, w którym dodatkowo, oprócz termów zależnych od termów, mamy termy zależne od typów. Z systemu F dziedziczymy w $F_{\omega}$ takie własności jak: 
\begin{itemize}
    \item abstrakcję i aplikację typową w termach: \\
\begin{tabular}{| l c r |}
  \hline
  t ::= & $\cdots$ &  \\
   & $\lambda x::K.t$ & \textit{abstrakcja typowa} \\
   & t[T] & \textit{aplikacja typowa} \\
  \hline
\end{tabular}

    \item  oraz typ uniwersalny: \\
\begin{tabular}{| l c r |}
  \hline
  T ::= & $\cdots$ &  \\
   & $\forall X::K$ & \textit{typ uniwersalny} \\
  \hline
\end{tabular}

\end{itemize}

Główną cechą systemu $\lambda_{\omega}$ jest to, że typy zależą od innych typów. 
\begin{itemize}
    \item kostruktory typowe \\
\begin{tabular}{| l c r |}
   \hline
   T ::= & $\cdots$ &  \\
   & $\lambda X::K.T$ & \textit{konstruktor abstrakcji typowej} \\
   & $T\;T$ & \textit{konstruktor aplikacji typowej} \\
   \hline
\end{tabular}
    \item rodzaje \\
\begin{tabular}{| l c r |}
  \hline
  K ::= &  &   \\
   & $\ast$ & \textit{rodzaj wszystkich typów} \\
   & $K \Rightarrow K$ & \textit{rodzaj funkcji typowej} \\
  \hline
\end{tabular}
\end{itemize} 

\subsection{Podstawowe definicje}

\begin{definicja}
	\emph{Kontekst typowania} opisany jest składnią abstrakcyjną
	
	\begin{tabular}{ | l c r | }
		\hline
		$\Gamma$ ::= & & \\
		& $\emptyset$ & \textit{pusty kontekst} \\
		& $\Gamma,x:T$& \textit{wiązanie zmiennej} \\ 
		& $\Gamma,X::K$& \textit{wiązanie rodzaju} \\ 
		\hline
	\end{tabular}
	
	Konteksty typowania bedziemy często traktować jako skończone zbiory wiązań i będziemy
	używać teoriomnogościowych symboli na nich. Np. przynależność do kontekstu formalnie
	definiujemy jako:
	\[
		\frac{}{B \in \Gamma,B}
		\qquad
		\frac{B \in \Gamma}{B \in \Gamma,B'}
	\]
	Definicje pozostałych operacji teoriomnogościowych są na tyle naturalne, że zostawiamy
	je Czytelnikowi do uzupełnienia.
\end{definicja}

\begin{definicja}
Tu należało by zdefiniować zmienne wolne, podstawienia, itp.
    \begin{itemize}
        \item $\alpha [\beta := \phi]= \begin{cases}  \alpha & \beta=\alpha \\ \beta & \text{w.p.p} \end{cases}$
        \item $(\vartheta \sigma) [\beta := \phi] = \vartheta [\beta := \phi] \sigma [\beta := \phi]$
        \item $\forall \alpha \sigma [\beta := \phi]= \begin{cases} \forall \alpha \sigma & \beta=\alpha \text{ lub } \beta \notin FV(\sigma)\\ \forall \alpha \sigma [\beta := \phi] & \alpha \notin FV(\phi)  \text{ i } \beta \in FV(\sigma) \end{cases}$
        \item $\lambda \alpha \sigma [\beta := \phi]= \begin{cases} \lambda \alpha \sigma & \beta=\alpha \text{ lub } \beta \notin FV(\sigma)\\ \lambda \alpha \sigma [\beta := \phi] & \alpha \notin FV(\phi)  \text{ i } \beta \in FV(\sigma) \end{cases}$
    \end{itemize}
\end{definicja}


\subsection{Kontrola rodzaju}

W systemie $F_\omega$ każdemu poprawnie zbudowanemu konstruktorowi rodzaju przyporządkowujemy rodzaj.
Przyporządkowanie to określa relacja $(.\vdash.::.)$ Zdefiniowana następująco.

\begin{definicja}
	Jeżeli zachodzi $\Gamma \vdash T :: K$, to powiemy, że
	\emph {konstruktor typowy $T$ jest rodzaju $K$ w~kontekście $\Gamma$}, gdzie
	relacja określenia rodzaju $(.\vdash.::.)$
	jest to najmniejsza relacja zamnknięta na reguły:
	\[
		\frac{X::K \in \Gamma}{\Gamma \vdash X::K}
		\qquad
		\frac{\Gamma \vdash T_1 :: K_{1} \Rightarrow K_{2} \hspace{1em} \Gamma \vdash T_2 :: K_{1}}{\Gamma \vdash T_1\;T_2 :: K_{2}}
	\]
	\[
		\frac{\Gamma \vdash X :: K_1 \hspace{1em} \Gamma \vdash T :: K_2}{\Gamma \vdash \lambda X::K. T :: K_{1} \Rightarrow K_{2}}
		\qquad
		\frac{\Gamma \vdash X :: K \hspace{1em} \Gamma \vdash T :: \ast}{\Gamma \vdash \forall X::K. T :: \ast}
	\]
	\[
		\frac{\Gamma \vdash T_1 : \ast \hspace{1em} \Gamma \vdash T_2 : \ast}{T_1 \rightarrow T_2 : \ast}
	\]	
\end{definicja}

\begin{definicja}
\emph{Typem} nazywamy konstruktor rodzaju $\ast$.
\end{definicja}

\subsection{Typowanie}

W systemie $F_\omega$ konstruktory typów reprezentowane są przez $\lambda$-termy, więc może
się zdażyć, że dwa różne konstruktory typów są sobie równoważne ($\beta\eta$-równe).

\begin{definicja}
	Powiemy, że dwa konstruktory typów są \emph{$\beta\eta$-równe}, jeżeli zachodzi $T =_{\beta\eta} S$,
	gdzie relacja $=_{\beta\eta}$ jest najmniejszą relacją zamkniętą na regóły:
	\[
		\frac{}{T=_{\beta\eta}T}
		\qquad
		\frac{S=_{\beta\eta}T}{T=_{\beta\eta}S}
		\qquad
		\frac{T=_{\beta\eta}U \quad U=_{\beta\eta}S}{T=_{\beta\eta}S}
	\]
	\[
		\frac{T_1=_{\beta\eta}S_1 \quad T_2=_{\beta\eta}S_2}{T_1 \rightarrow T_2 =_{\beta\eta} S_1 \rightarrow S_2}
		\qquad
		\frac{T_1=_{\beta\eta}S_1 \quad T_2=_{\beta\eta}S_2}{T_1\;T_2 =_{\beta\eta} S_1\;S_2}
	\]
	\[
		\frac{T=_{\beta\eta}S}{\forall X::K.T =_{\beta\eta} \forall X::K.S}
		\qquad
		\frac{X \notin FV(T)}{\lambda X::K.T\;X =_{\beta\eta} T}
	\]
	\[
		\frac{}{(\lambda X::K.T)S =_{\beta\eta} T[X:=S]}
	\]	
	W tych regółach zakładamy konwencję Barendregta.
\end{definicja}

\begin{definicja}
	Powiemy, że \emph{Term $t$ jest typu $T$ w kontekście $\Gamma$} jeżeli zachodzi $\Gamma \vdash t : T$, gdzie
	relacja typowania $(.\vdash.:.)$ jest najmniejszą relacją zamkniętą na regóły:
	\[
		\frac{x:T \in \Gamma}{\Gamma \vdash x : T}
		\qquad
		\frac{\Gamma\vdash T_1::* \quad \Gamma,x:T_1\vdash t:T_2}{\Gamma\vdash \lambda x:T_1.t : T_1 \rightarrow T_2}
	\]
	\[
		\frac{\Gamma\vdash t_1 : T_1 \rightarrow T_2 \quad \Gamma\vdash t_2 : T_1}{\Gamma\vdash t_1\;t_2 : T_2}
		\qquad
		\frac{\Gamma,X::K\vdash t:T}{\Gamma\vdash \lambda X::K.t : \forall X::K.T}
	\]
	\[
		\frac{\Gamma\vdash t : \forall X:K.T' \quad \Gamma\vdash T::K}{\Gamma\vdash t[T]::T'[X := T]}
		\qquad
		\frac{\Gamma\vdash t:S \quad S=_{\beta\eta}T \quad \Gamma\vdash T::*}{\Gamma\vdash t:T}
	\]
\end{definicja}

\subsection{Wartościowanie}

Wartości:

\begin{tabular}{ l c r }
  v ::= & & \\
   & $\lambda x:T.t$ & \textit{wartość abstrakcji} \\
\end{tabular}

Regóły wartościowania:
\[
	\frac{t_1 \longrightarrow_\beta t_1'}{t_1\;t_2 \longrightarrow_\beta t_1'\;t_2}
	\qquad
	\frac{t_2 \longrightarrow_\beta t_2'}{v_1\;t_2 \longrightarrow_\beta v_1'\;t_2}
	\qquad
	\frac{}{(\lambda x:T.t)v \longrightarrow_\beta t[x:=v]}
\]
\[
	\frac{t \longrightarrow_\beta t'}{t[T] \longrightarrow_\beta t'[T]}
	\qquad
	\frac{}{(\lambda X::K.t)[T] \longrightarrow_\beta t[X:=T]}
\]

no i konstruktory są silnie normalizowalne, własność churcha-rossera zachodzi...

\begin{definicja}
Reguły przepisywania typów w systemie $F_{\omega}$ w wersji Curry'ego standardowe, oprócz: \\

$\frac{\Gamma \vdash M : \forall \alpha \sigma}{\Gamma \vdash M : nf(\sigma [ \alpha := \tau ])}$

\end{definicja}


Nierozstzygalne są problemy:
    \begin{itemize}
        \item sprawdzania typu: dane $\Gamma, M, \tau$, Czy $\Gamma \vdash M : \tau$
        \item typowalność: dane M, Czy $\exists \Gamma \tau . \Gamma \vdash M : \tau$
    \end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Własności i dowody}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setcounter{equation}{0}

\begin{twierdzenie}[Progres]
Niech $t$ będzie termem nie będącym wartością, oraz niech $\Gamma$ oraz $T$ będą
kontekstem typowania i~typem, takim że zachodzi $\Gamma\vdash t : T$. Wówczas istnieje
taki term $t'$, że $t \longrightarrow_\beta t'$.
\end{twierdzenie}
\begin{proof}
\end{proof}

\begin{twierdzenie}[Zachowanie typu]
Niech zachodzi $\Gamma \vdash t:T$, oraz $t \longrightarrow_\beta t'$ dla pewnych
$\Gamma$, $t$, $t'$ oraz $T$. Wówczas zachodzi
$\Gamma\vdash t' : T$.
\end{twierdzenie}
\begin{proof}
\end{proof}
	
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Możliwe rozszerzenia}                                 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setcounter{equation}{0}


\subsection{wyrażenia arytmetyczne i logiczne}
\subsection{unit i sekwencje}
\subsection{definicje lokalne}
\subsection{Rekordy}
\subsection{warianty}
\subsection{punkt stały}
\subsection{listy}
\subsection{typy egzystencjalne}
\subsection{rekonstrukcje typów}
\subsection{typy rekurencyjne}
\subsection{dopasowanie wzorca}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Praktyczne zastosowanie}                       
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setcounter{equation}{0}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Podsumowanie}                       
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setcounter{equation}{0}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Bibliografia
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\newpage
\thispagestyle{empty}
\begin{thebibliography}{99}

\bibitem{ChK} W.~Cheney, D.~Kincaid, \textit{Analiza numeryczna\/}, WNT, 2006.

\bibitem{L1}   S.~Lewanowicz, \textit{Notatki do wykładu z analizy numerycznej},
              Wrocław, 2009.
\bibitem{L2} S.~Lewanowicz, \textit{Naturalna funkcja sklejana interpolacyjna III stopnia },
              Wrocław, 2009. 
\bibitem{ChK} http://wazniak.mimuw.edu.pl/.

	  
\end{thebibliography}

\end{document}

