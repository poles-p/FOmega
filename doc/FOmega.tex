%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                                                            %%
%%                                              Wrocław, styczeń 2011 r.      %%
%%                                                                            %%
%%                                                                            %%
%%                                                                            %%
%%                                SYSTEMY TYPÓW - PROJEKT                     %%
%%                                                                            %%
%%                                   Piotr Polesiuk                           %%
%%                                Małgorzata Jurkiewicz                       %%
%%                                                                            %%
%%                                                                            %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\documentclass[11pt,leqno]{article}

\usepackage[polish]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}


\usepackage{a4wide}

\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage[pdftex]{graphicx}
\usepackage{caption}
\usepackage{bm}
\usepackage{amsthm}


 
%%%%%%%%%%%%%%%%%%
% Kropka po numerze paragrafu, podparagrafu itp. 

\makeatletter
 \renewcommand\@seccntformat[1]{\csname the#1\endcsname.\quad}
 \renewcommand\numberline[1]{#1.\hskip0.7em}
\makeatother

%%%%%%%%%%%%%%%%%%
% Kropka po numerze tablicy, rysunku i ustawienie czcionki dla etykiety. 

\captionsetup{labelfont=sc,labelsep=period}

%%%%%%%%%%%%%%%%%%
% Inna numeracja wzorów.

\renewcommand{\theequation}{\arabic{section}.\arabic{equation}}

%%%%%%%%%%%%%%%%%%

\title{{\textbf{System typów $F_{\omega}$}}\\[1ex]
       {\Large Systemy Typów 2010/11}\\[-1ex]
       {\large Prowadzący: dr Dariusz Biernacki}}
\author{Piotr Polesiuk \\ \texttt{bassists@o2.pl} 
   \and Małgorzata Jurkiewicz \\ \texttt{gosia.jurkiewicz@gmail.com}} 

\date{Wrocław, dnia \today\ r.}

\begin{document}
\thispagestyle{empty}
\maketitle

\pagebreak

\theoremstyle{plain}
\newtheorem{twierdzenie}{Twierdzenie}
\newtheorem{lemay}{Lemat}

\theoremstyle{definition}
\newtheorem{definicja}{Definicja}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Wstęp}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setcounter{equation}{0}


No to na razie taki bałagan



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{System $F_{\omega}$}                                 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setcounter{equation}{0}

Króciutki wstępik o czym rozdział by sie przydał.

\subsection {Termy i typy w $F_\omega$}

System $F_{\omega}$ to rachunek będący rozszerzeniem $\lambda_{\omega}$ oraz systemu $F$.
Wszystkie trzy wywodzą się z rachunku lambda z typami prostymi. Termy oraz typy definiujemy w $\lambda_{\rightarrow}$ następująco: \\ \\
\begin{tabular}{| l c r |}
  \hline
  $\mathtt{t}$ ::= &  & \textit{termy}  \\
   & $\mathtt{x}$ & \textit{zmienne}  \\
   & $\mathtt{\lambda x:T.t}$ & \textit{abstrakcja} \\
   & $\mathtt{t \hspace{0.2em} t}$ & \textit{aplikacja} \\
   & & \\
  $\mathtt{T}$ ::= &  & \textit{typy} \\
   & $\mathtt{X}$ & \textit{zmienna typowa} \\
   & $\mathtt{T \rightarrow T}$ & \textit{typ funkcji} \\
  \hline
\end{tabular} \\



\subsubsection{System $\lambda_{\omega}$} 

Główną cechą systemu $\lambda_{\omega}$ jest to, że oprócz termów zależnych od termów mamy typy zależne od typów, czyli możemy mówić o aplikacji i abstrakcji typowej. By nam się nie pomyliło z abstrakcją na termach, zmienne typowe będziemy zaczynać dużą literą. Przykładowo $\mathtt{Tb=\lambda X.X \rightarrow Bool}$ i $\mathtt{\lambda X.X \rightarrow X}$ są abstrakcją typową, ale $\mathtt{\lambda x.x \rightarrow x}$ jest abstrakcją na termach. 
Do tego typu możemy zaaplikować $\mathtt{Bool}$ i dostaniemy $\mathtt{(\lambda X.X \rightarrow Bool)Bool}$ równoważne $\mathtt{Bool \rightarrow Bool}$. Jak widać użyłam słowa \textit{równoważne}. W rachunku lambda z typami prostymi sposób konstrukcji typów gwarantował nam, że dwa różne typy $\mathtt{T_1}$ i $\mathtt{T_2}$ na pewno są różne (zakładając, że typy bazowe były sobie różne). W $\lambda_{\omega}$ jest inaczej, typy tego systemu możemy podzielić na klasy równoważności. Do klasy $\mathtt{Bool \rightarrow Bool}$ należą również $\mathtt{ (Tb^n) Bool }$ dla $n$ naturalnego, a $\mathtt{T^n}$ oznacza aplikację $n$ typów $\mathtt{T}$.
Zauważmy, że odpowiednikiem takiej relacji równoważności na termach jest $\beta$-równoważność. W świecie typów nazwiemy taką relację $\equiv_{\beta}$.
Dodatkowo wprowadzimy następującą regułę:
$\frac{\Gamma \vdash t:S \hspace{1em} S\equiv_{\beta}T  }{\Gamma \vdash t:T}$
mówiącą, że jeżeli term jest typu $S$, to jest też typu dowolnego równoważnego z $S$.  

Niestety, w tak zdefiniowanym systemie powstaje jeden problem. Nie chcielibyśmy, aby $\mathtt{Bool \hspace{0.2em} Bool}$ było dozwolone, tak samo, jak w świecie termów nie chcieliśmy, by $\mathtt{true \hspace{0.2em} true}$ było dozwolone. W świecie termów, by rozwiązać ten problem, wprowadziliśmy typy na termach, w świecie typów wprowadzimy \textit{typy} na typach, czyli rodzaje. Piszemy, że $\mathtt{T::K}$, czyli typ $\mathtt{T}$ ma rodzaj $\mathtt{K}$. Wprowadzimy też jeden rodzaj bazowy $\mathtt{\ast}$.

Wszystkie typy, jakie pojawiły się w $\lambda_{\rightarrow}$, są rodzaju $\mathtt{\ast}$. Np. $\mathtt{Bool :: \ast}$, $\mathtt{Nat \rightarrow Nat}$, $\mathtt{(Bool \rightarrow Nat) \rightarrow Nat} :: \ast$, itd. Rodzaj $\mathtt{\ast \Rightarrow \ast}$ będzie dla funkcji z typów w typy, np. $\mathtt{\lambda X.X \rightarrow Bool::\ast \Rightarrow \ast }$. $\mathtt{\ast \Rightarrow \ast \Rightarrow \ast}$ bierze typ i zwraca funkcję typową, np. $\mathtt{\lambda X. \lambda Y. X \rightarrow Y::\ast \Rightarrow \ast \Rightarrow \ast}$, itd. 

Teraz możemy $\lambda_{\rightarrow}$ rozszerzyć o następujące konstrukcje: 
\begin{itemize}
    \item rodzaje \\ \\
\begin{tabular}{| l c r |}
  \hline
  $\mathtt{K}$ ::= &  & rodzaje  \\
   & $\mathtt{\ast}$ & \textit{rodzaj wszystkich typów} \\
   & $\mathtt{K \Rightarrow K}$ & \textit{rodzaj funkcji typowej} \\
  \hline
\end{tabular}
    \item abstrakcję i aplikację typową na typach \\ \\
\begin{tabular}{| l c r |}
   \hline
   $\mathtt{T}$ ::= & $\cdots$ &  \\
   & $\mathtt{\lambda X::K.T}$ & \textit{abstrakcja typowa} \\
   & $\mathtt{T\;T}$ & \textit{aplikacji typowa} \\
   \hline
\end{tabular}
\end{itemize} 


\subsubsection{System $F$}

System F jest systemem, w którym dodatkowo, oprócz termów zależnych od termów, mamy termy zależne od typów. Wprowadzimy trzeci już rodzaj abstrakcji i aplikacji, poprzedni był w świecie typów, te będą w świecie termów. Znana jest nam funkcja identycznościowa $\mathtt{\lambda x.x}$, w $\lambda_{\rightarrow}$ możemy ją napisać na wiele sposób: $\mathtt{\lambda x:Bool.x}$, $\mathtt{\lambda x:Nat.x}$, $\mathtt{\lambda x:Bool \rightarrow Nat.x}$. W systemie $F$ możemy wszystkie te funkcje zapisać jako: $\mathtt{\lambda X. \lambda x:X.x}$. Zauważmy, że ten \textit{term} przyjmuje jako pierwszy argument typ, następnie term pierwszego typu i zwraca go. Przykładem użycia takiego termu mogą być: $(\mathtt{\lambda X. \lambda x:X.x)\;[Bool]\;true}$, co daje $\mathtt{true}$, albo $(\mathtt{\lambda X. \lambda x:X.x)\;[Nat]\;1}$, co daje $\mathtt{1}$. W ten sposób powstała nam \textit{uniwersalna} funkcja identycznościowa, której nadamy tzw. uniwersalny typ: $\mathtt{\lambda X. \lambda x:X.x \; : \; \forall X.X \rightarrow X}$. Dodatkowo, jako że dodaliśmy już do systemu rodzaje, napiszemy $\mathtt{\lambda X::\ast. \lambda x:X.x \; : \; \forall X::\ast.X \rightarrow X}$. 


Po tym krótkim wstępie możemy już zdefiniować odziedziczone z systemu $F$ własności takie, jak:  
\begin{itemize}
    \item abstrakcję i aplikację typową na termach \\ \\
\begin{tabular}{| l c r |}
  \hline
  $\mathtt{t}$ ::= & $\cdots$ & \textit{termy} \\
   & $\mathtt{\lambda X::K.t}$ & \textit{abstrakcja typowa} \\
   & $\mathtt{t[T]}$ & \textit{aplikacja typowa} \\
  \hline
\end{tabular}

    \item typ uniwersalny \\ \\
\begin{tabular}{| l c r |}
  \hline
  $\mathtt{T}$ ::= & $\cdots$ & \textit{typy}  \\
   & $\mathtt{\forall X::K.T}$ & \textit{typ uniwersalny} \\
  \hline
\end{tabular}

\end{itemize}


\subsection{Ewaluacja}

\subsubsection{Kontrola rodzaju}

\begin{definicja}
	\emph{Kontekst typowania} opisany jest składnią abstrakcyjną
	
	\begin{tabular}{ | l c r | }
		\hline
		$\Gamma$ ::= & & \\
		& $\emptyset$ & \textit{pusty kontekst} \\
		& $\Gamma,x:T$& \textit{wiązanie zmiennej} \\ 
		& $\Gamma,X::K$& \textit{wiązanie rodzaju} \\ 
		\hline
	\end{tabular}
	
	Konteksty typowania bedziemy często traktować jako skończone zbiory wiązań i będziemy
	używać teoriomnogościowych symboli na nich. Np. przynależność do kontekstu formalnie
	definiujemy jako:
	\[
		\frac{}{B \in \Gamma,B}
		\qquad
		\frac{B \in \Gamma}{B \in \Gamma,B'}
	\]
	Definicje pozostałych operacji toriomnogościowych są na tyle naturalne, że zostawiamy
	je Czytelnikowi do uzupełnienia.
\end{definicja}

W systemie $F_\omega$ każdemu poprawnie zbudowanemu konstruktorowi rodzaju przyporządkowujemy rodzaj.
Przyporządkowanie to określa relacja $(.\vdash.::.)$ Zdefiniowana następująco.

\begin{definicja}
	Jeżeli zachodzi $\Gamma \vdash T :: K$, to powiemy, że
	\emph {konstruktor typowy $T$ jest rodzaju $K$ w~kontekście $\Gamma$}, gdzie
	relacja określenia rodzaju $(.\vdash.::.) \subseteq \Gamma \times T \times K$
	jest to najmniejsza relacja zamnknięta na reguły:
	\[
		\frac{X::K \in \Gamma}{\Gamma \vdash X::K}
		\qquad
		\frac{\Gamma \vdash T_1 :: K_{1} \Rightarrow K_{2} \hspace{1em} \Gamma \vdash T_2 :: K_{1}}{\Gamma \vdash T_1 T_2 :: K_{2}}
	\]
	\[
		\frac{\Gamma \vdash X :: K_1 \hspace{1em} \Gamma \vdash T :: K_2}{\Gamma \vdash \lambda X::K. T :: K_{1} \Rightarrow K_{2}}
		\qquad
		\frac{\Gamma \vdash X :: K \hspace{1em} \Gamma \vdash T :: \ast}{\Gamma \vdash \forall X::K. T :: \ast}
	\]
	\[
		\frac{\Gamma \vdash T_1 : \ast \hspace{1em} \Gamma \vdash T_2 : \ast}{T_1 \rightarrow T_2 : \ast}
	\]	
\end{definicja}

\begin{definicja}
\emph{Typem} nazywamy konstruktor rodzaju $\ast$.
\end{definicja}

\subsection{Typowanie}

\begin{definicja}
No o podstawieniu konstruktora za zmienną konstruktorową można napisać albo nie. Tutaj można też wrzucić kod.
    \begin{itemize}
        \item $\alpha [\beta := \phi]= \begin{cases}  \alpha & \beta=\alpha \\ \beta & \text{w.p.p} \end{cases}$
        \item $(\vartheta \sigma) [\beta := \phi] = \vartheta [\beta := \phi] \sigma [\beta := \phi]$
        \item $\forall \alpha \sigma [\beta := \phi]= \begin{cases} \forall \alpha \sigma & \beta=\alpha \text{ lub } \beta \notin FV(\sigma)\\ \forall \alpha \sigma [\beta := \phi] & \alpha \notin FV(\phi)  \text{ i } \beta \in FV(\sigma) \end{cases}$
        \item $\lambda \alpha \sigma [\beta := \phi]= \begin{cases} \lambda \alpha \sigma & \beta=\alpha \text{ lub } \beta \notin FV(\sigma)\\ \lambda \alpha \sigma [\beta := \phi] & \alpha \notin FV(\phi)  \text{ i } \beta \in FV(\sigma) \end{cases}$
    \end{itemize}
\end{definicja}

no i konstruktory są silnie normalizowalne, własność churcha-rossera zachodzi...

\begin{definicja}
Reguły przepisywania typów w systemie $F_{\omega}$ w wersji Curry'ego standardowe, oprócz: \\

$\frac{\Gamma \vdash M : \forall \alpha \sigma}{\Gamma \vdash M : nf(\sigma [ \alpha := \tau ])}$

\end{definicja}


Nierozstzygalne są problemy:
    \begin{itemize}
        \item sprawdzania typu: dane $\Gamma, M, \tau$, Czy $\Gamma \vdash M : \tau$
        \item typowalność: dane M, Czy $\exists \Gamma \tau . \Gamma \vdash M : \tau$
    \end{itemize}


\subsection{pare słów o rozszerzeniach}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Sładnia abstrakcyjna języka}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setcounter{equation}{0}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Semantyka i typowanie}                                 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setcounter{equation}{0}


\subsection{rachunek lambda}



\begin{tabular}{ l c r }
  v ::= & $\cdots$ &  \\
   & $\lambda x:T.t$ & \textit{wartość abstrakcji} \\
\end{tabular}



\begin{tabular}{ l c r }
  $\Gamma$ ::= & $\cdots$ &  \\
   & $\emptyset$ & \textit{pusty kontekst} \\
   & $\Gamma,x:T$& \textit{wiązanie zmiennej} \\ 
\end{tabular}



\subsection{kinds}



\begin{tabular}{ l c r }
  v ::= & $\cdots$ &  \\
   & $\lambda x::K.t$ & \textit{wartość abstrakcji typowej} \\
\end{tabular}

\begin{tabular}{ l c r }
  $\Gamma$ ::= & $\cdots$ &  \\
   & $\Gamma,X::K$& \textit{wiązanie zmiennej typowej} \\ 
\end{tabular}

\subsection{wyrażenia arytmetyczne i logiczne}

\subsection{unit i sekwencje}
\subsection{definicje lokalne}
\subsection{Rekordy}
\subsection{warianty}
\subsection{punkt stały}
\subsection{listy}
\subsection{typy egzystencjalne}
\subsection{rekonstrukcje typów}
\subsection{typy rekurencyjne}
\subsection{dopasowanie wzorca}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Własności i dowody}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setcounter{equation}{0}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Praktyczne zastosowanie}                       
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setcounter{equation}{0}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Podsumowanie}                       
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setcounter{equation}{0}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Bibliografia
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\newpage
\thispagestyle{empty}
\begin{thebibliography}{99}

\bibitem{ChK} Pierce, \textit{} 


	  
\end{thebibliography}

\end{document}

